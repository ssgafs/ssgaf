<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mars Clicker</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            background: url('https://cerenas.club/uploads/posts/2022-12/thumbs/1670978601_cerenas-club-p-chernii-fon-kosmos-krasivo-56.jpg') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            text-align: center;
            width: 100%;
            max-width: 400px;
            padding: 20px;
        }

        .main-title {
            font-size: 2em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .main-icon {
            width: 150px;
            height: 150px;
            background: url('') no-repeat center center;
            background-size: cover;
            margin: 20px auto;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
        }

        .coin-count {
            font-size: 2em;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .coin-icon {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }

        .progress-bar {
            background-color: #444;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            width: 100%;
        }

        .progress-bar div {
            background-color: #ff4500;
            height: 20px;
            width: 0%;
            transition: width 0.3s;
        }

        .level {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .experience {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .mars-planet {
            position: absolute;
            width: 20px;
            height: 20px;
            background: url('https://image.flaticon.com/icons/png/512/3722/3722173.png') no-repeat center center;
            background-size: cover;
            border-radius: 50%;
            pointer-events: none;
            animation: fly 1s linear;
        }

        @keyframes fly {
            from {
                opacity: 1;
                transform: translateY(0);
            }

            to {
                opacity: 0;
                transform: translateY(-100px) translateX(calc(-50px + 100 * var(--random)));
            }
        }

        .profile-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #444;
            border: 2px solid #fff;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .profile-button img {
            width: 80%;
            height: 80%;
            border-radius: 50%;
        }

        .profile-menu {
            position: absolute;
            top: 70px;
            right: 10px;
            width: 300px;
            background-color: #222;
            border: 2px solid #fff;
            border-radius: 10px;
            padding: 20px;
            display: none;
            flex-direction: column;
            align-items: center;
            z-index: 10;
        }

        .profile-menu.show {
            display: flex;
        }

        .profile-menu div {
            margin: 10px 0;
            font-size: 1em;
        }
    </style>
</head>

<body>
    <div class="profile-button" onclick="toggleProfileMenu()">
        <img src="https://image.flaticon.com/icons/png/512/1946/1946426.png" alt="Profile">
    </div>
    <div class="profile-menu" id="profileMenu">
        <div>Профиль</div>
        <div>Настройки</div>
        <div>Выйти</div>
    </div>
    <div class="container">
        <h1 class="main-title">Mars Clicker</h1>
        <div class="main-icon" onclick="clickPlanet()">
            <div class="mars-planet"></div>
        </div>
        <div class="coin-count">
            <img class="coin-icon" src="https://image.flaticon.com/icons/png/512/102/102018.png" alt="Coin">
            <span id="coinCount">0</span>
        </div>
        <div class="progress-bar">
            <div id="progressBar"></div>
        </div>
        <div class="level">Уровень: <span id="level">1</span></div>
        <div class="experience">Опыт: <span id="experience">0</span></div>
    </div>

    <script>
        let coins = 0;
        let level = 1;
        let experience = 0;

        function getData(key) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : null;
        }

        function setData(key, value) {
            localStorage.setItem(key, JSON.stringify(value));
        }

        window.onload = function () {
            const savedData = getData('marsClickerData');
            if (savedData) {
                coins = savedData.coins;
                level = savedData.level;
                experience = savedData.experience;
                updateUI();
            }
        };

        function updateUI() {
            document.getElementById('coinCount').innerText = coins;
            document.getElementById('level').innerText = level;
            document.getElementById('experience').innerText = experience;
            updateProgressBar();
        }

        function clickPlanet() {
            coins++;
            experience += 10;
            updateUI();
            createSmallPlanets();
        }

        function updateProgressBar() {
            const maxProgress = 1000 + (level - 1) * 500;
            const progress = Math.min((experience / maxProgress) * 100, 100);
            document.getElementById('progressBar').style.width = progress + '%';
            if (progress === 100) {
                level++;
                experience = 0;
                updateUI();
            }
        }

        function toggleProfileMenu() {
            const menu = document.getElementById('profileMenu');
            menu.classList.toggle('show');
        }

        function createSmallPlanets() {
            const mainIcon = document.querySelector('.main-icon');
            const bounds = mainIcon.getBoundingClientRect();
            const numPlanets = Math.floor(Math.random() * 3) + 1; // Случайное количество планет (от 1 до 3)
            const container = document.querySelector('.container');

            for (let i = 0; i < numPlanets; i++) {
                const smallPlanet = document.createElement('div');
                smallPlanet.classList.add('mars-planet');
                smallPlanet.style.top = bounds.top + 'px';
                smallPlanet.style.left = bounds.left + 'px';
                container.appendChild(smallPlanet);

                setTimeout(() => {
                    smallPlanet.style.transform = `translate(${Math.random() * 100}px, ${Math.random() * 100}px)`;
                    smallPlanet.style.opacity = 0;
                }, 10);

                setTimeout(() => {
                    container.removeChild(smallPlanet);
                }, 1000);
            }
        }
    </script>
</body>

</html>

